{% extends 'base.html.twig' %}

{% block title %}
Réalisations
{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
	.center-text {
		color: #fff;
		text-align: center;
		font-family: Lexend;
		font-size: 13px;
		font-style: normal;
		font-weight: 400;
		line-height: 30.6px;
		/* 191.25% */
	}

	.title.ml-2 {
		color: #242222;
		font-family: Lexend;
		font-size: 24px;
		font-style: normal;
		font-weight: 700;
		line-height: 45px;
		/* 125% */
		letter-spacing: -0.5px;
		margin-top: 9%;
	}

	.sectionall img {
		width: 100% !important;
	}

	.card-title.img-overlay {
		font-size: 20px;
	}

	span#title-from {
		font-size: 12px;
	}

	img#icon-Vector {
		float: right;
		margin-right: 44%;
		width: 14%;
		margin-top: 2%;
	}

	h5.card-title.img-overlay {
		margin-top: 24%;
		color: white;
		font-weight: bold;
	}


	.modal {
		display: none;
		position: fixed;
		z-index: 1050;
		padding-top: 35px;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		overflow: auto;
		background-color: rgba(0, 0, 0, 0.8);
	}

	.mobile-modal {
		display: none !important;
	}

	.modal-content {
		margin: auto;
		display: block;
		max-width: 34%;
		max-height: 60%;
	}

	.modal-info {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-top: 10px;
	}

	#caption {
		margin: auto;
		display: block;
		text-align: center;
		color: #ccc;
		padding: 10px 0;
	}

	.close {
		position: absolute;
		top: 15px;
		right: 35px;
		color: #fff;
		font-size: 40px;
		font-weight: bold;
		cursor: pointer;
	}

	.close:hover,
	.close:focus {
		color: #bbb;
		text-decoration: none;
		cursor: pointer;
	}

	.prev,
	.next {
		cursor: pointer;
		position: absolute;
		top: 50%;
		width: auto;
		padding: 16px;
		margin-top: -22px;
		color: white;
		font-weight: bold;
		font-size: 24px;
		transition: 0.3s;
		user-select: none;
		color: white !important;
	}

	.prev {
		left: 0;
	}

	.next {
		right: 0;
	}

	.prev:hover,
	.next:hover {
		background-color: rgba(0, 0, 0, 0.8);
	}

	img#imagearound {
		width: 100%;
		border: 10px;
		border-radius: 10px;
		height: 190px !important;
	}

	.card .row {
		display: flex;
		/* Flex layout for children */
		flex-wrap: wrap;
		/* Prevent wrapping */
		height: 100%;
		/* Full height of the card */
	}

	.card .col-md-6 {
		flex: 1;
		/* Equal size columns */
		display: flex;
		flex-direction: column;
		/* Ensure child elements stack vertically */
	}

	.card-img {
		flex: 1;
		/* Takes up all available height */
		object-fit: cover;
		/* Ensures the image scales properly */
		width: 100%;
		/* Full width */
	}

	.card-body {
		flex: 1;
		/* Takes up remaining space */
		padding: 15px;
		/* Optional padding */
		display: flex;
		flex-direction: column;
		/*text-align: center;*/
		/*align-items: center;*/
		/*justify-content: center; */
	}



	.informations-realisation {
		position: absolute;
		width: 71%;
		height: 59%;
		/* border: 1px solid; */
		top: 38%;
		left: 4%;
		background: linear-gradient(90deg, rgba(176, 203, 50, 1) 42%, rgba(123, 142, 33, 1) 99%);
		border-radius: 13px;
		padding: 20px;

	}
</style>
{% endblock %}
{% block body %}

<div class="green-screen d-flex justify-content-center align-items-center">
	<h3 class="blog-title">Réalisations</h3>
</div>

<div class="container-service p-2">
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<span class="green-divider"></span>
				<h5 class="resalise-title actualite-title">Projets réalisés pour nos fidèles partenaires</h5>
			</div>
			<div class="col-md-6 d-flex flex-column align-items-md-end justify-content-center">
				<input class="searchInput" type="text" id="searchInput" placeholder="Recherche" />
			</div>
		</div>

		<div class="row my-3">
			<div class="tabs col-md-6 col-lg-3">
				<a href="{{ path('realisations') }}"
					class="btn btnTabs {{ app.request.get('_route') == 'realisations' ? 'active-tab' : '' }}">
					Tous les projets
				</a>
			</div>
			<div class="tabs col-md-6 col-lg-3">
				<a href="{{ path('conception_travaux_tce') }}"
					class="btn btnTabs {{ app.request.get('_route') == 'conception_travaux_tce' ? 'active-tab' : '' }}">
					Conception & Travaux TCE
				</a>
			</div>
			<div class="tabs col-md-6 col-lg-3">
				<a href="{{ path('travauxTce') }}"
					class="btn btnTabs {{ app.request.get('_route') == 'travauxTce' ? 'active-tab' : '' }}">
					Travaux TCE
				</a>
			</div>
			<div class="tabs col-md-6 col-lg-3">
				<a href="{{ path('fournitureMobilier') }}"
					class="btn btnTabs {{ app.request.get('_route') == 'fournitureMobilier' ? 'active-tab' : '' }}">
					Fourniture de mobilier
				</a>
			</div>
		</div>

		<div class="row justify-content-center">
			{% for realisation in realisations %}
			<div class="col-lg-6">
				<a href="{{path('realisation',{title:realisation.title})}}">
					<div class="realisation-card realisation-item mb-3" data-title="{{ realisation.title|lower }}"
						data-city="{{ realisation.city|lower }}"
						style="background:url('/front/img/{{ realisation.image }}');">
					</div>
				</a>
			</div>
			{% endfor %}
		</div>



		<div class="row">
			{% for realisation in realisations %}
			<div class="col-6">
				<a href="{{path('realisation',{title:realisation.title})}}">
					<div class="realisation-card realisation-item mr-2 mb-3" data-title="{{ realisation.title|lower }}"
						data-city="{{ realisation.city|lower }}"
						style="background:url('/front/img/{{ realisation.image }}');">
						<div class="informations-realisation">
							<h5 style="color:white;">{{realisation.title}}</h5>
							<p style="color:white;font-size: 10px;margin-bottom: 10px;height: 80px;">
								{{realisation.descriptionPrincipal|striptags|raw}}</p>
							<div class="row">
								<div class="col-10" style="display: flex;align-items: center;">
									<i class="fa-solid fa-location-dot"
										style="font-size:20px;    color: white;margin-right: 10px;"></i>
									<span class="city" style="color:white; font-weight:300;">{{realisation.city}}</span>
								</div>
								<div class="col-2">
									<i class="fa-solid fa-arrow-right"
										style="font-size:20px;    color: white;margin-right: 10px;"></i>
								</div>
							</div>
						</div>
					</div>
				</a>
			</div>
			{% endfor %}
		</div>
	</div>
</div>




<script>
	document.addEventListener('DOMContentLoaded', function () {
		const searchInput = document.getElementById('searchInput');

		if (searchInput) { // Check if the element exists
			searchInput.addEventListener('input', function () {
				const searchQuery = this.value.toLowerCase();
				console.log(searchQuery);
				const realisationItems = Array.from(document.querySelectorAll('.realisation-item'));

				realisationItems.filter(item => {
					const title = item.getAttribute('data-title');
					const city = item.getAttribute('data-city');

					// Check if the search query matches the title or city
					return title.includes(searchQuery) || city.includes(searchQuery);
				}).forEach(item => item.style.display = '');

				realisationItems.filter(item => {
					const title = item.getAttribute('data-title');
					const city = item.getAttribute('data-city');

					// Check if the search query does not match the title or city
					return !title.includes(searchQuery) && !city.includes(searchQuery);
				}).forEach(item => item.style.display = 'none');
			});
		}
	});
</script>
{% endblock %}